@startuml Players Play a WoJ Game
title Players Play a WoJ Game
skinparam sequenceReferenceBackgroundColor palegreen
skinparam sequenceReferenceHeaderBackgroundColor  mediumseagreen

participant Client1 #Plum
participant Client2 #Plum

box "Game Server" #LightSteelBlue
participant MessageServer as Server
participant ExecutiveLogic
participant GameBoard
participant ScoreKeeper
participant Wheel

Client1 -> Server: connect(svrIP, svrPort)
Client1 <- Server: send("PlayerID", ID)
Client2 -> Server: connect(svrIP, svrPort)
Client2 -> Server: send("PlayerID", ID)


Server -> ExecutiveLogic : startGame([playerID])
loop#Gold 2 times
    ExecutiveLogic -> ExecutiveLogic: incrementRound()

    == START ROUND ==
    loop#Gold number of spins < 50 and board is not empty
        == START TURN ==
        Server <- ExecutiveLogic : whoseTurn()

        group#mediumseagreen Prompt Player to Spin
            Client1 <- Server: send("pleaseSpin", playerID)

            alt#MediumTurquoise Player responds

                Client1 -> Server: send("Spin Wheel")
                Server -> ExecutiveLogic: spinRequest()

            else No player response
                Server -> ExecutiveLogic: timeout()
                ExecutiveLogic -> ExecutiveLogic: nextPlayer()

            end
        end

        ExecutiveLogic -> GameBoard : getAvailableCategories()
        ExecutiveLogic -> Wheel : updateCategories()
        ExecutiveLogic -> Wheel : getSpinResult()
        ExecutiveLogic <-- Wheel : sector

        ref#Cyan over Client1, ExecutiveLogic
            Send Spin Result to Clients
        end ref

        ref over Client1, ScoreKeeper
            Respond to Wheel Spin
        end ref

    end
end
    == END GAME ==

    ExecutiveLogic -> ScoreKeeper: determineWinner()
    ExecutiveLogic -> Server: endGame(winner)

    Client1 <- Server: send("GAMEOVER", playerID)
    Client2 <- Server: send("GAMEOVER", playerID)


@enduml